<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³µì • ì†Œë¹„ ì§€ë„ â€” ì¶©ë‚¨ëŒ€ ì£¼ë³€</title>
    <style>
        :root{
            --main:#3EB7A0;
            --bg:#F5F5F3;
            --card:#FFFFFF;
            --muted:#7a7a7a;
            --accent:#2f8f7c;
        }
        *{box-sizing:border-box}
        body{
            margin:0;
            font-family: "Noto Sans KR", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background:var(--bg);
            color:#222;
            -webkit-font-smoothing:antialiased;
        }
        .navbar{background:var(--main);padding:12px 16px;position:sticky;top:0;z-index:100;display:flex;align-items:center;gap:12px}
        .brand{color:white;font-weight:700;font-size:18px;margin-right:8px}
        .nav-btn{background:white;border:none;padding:10px 14px;border-radius:24px;cursor:pointer;color:var(--main);font-weight:600}
        .container{max-width:1100px;margin:22px auto;padding:0 16px}
        /* ìƒë‹¨ í•µì‹¬ ë°°ë„ˆ */
        .hero{background:linear-gradient(90deg, rgba(62,183,160,0.12), transparent);padding:22px;border-radius:14px;display:flex;gap:18px;align-items:center}
        .hero-left{flex:1}
        .hero h1{margin:0;color:var(--main);font-size:20px}
        .hero p{margin:8px 0 0 0;color:var(--muted)}
        .hero-cta{display:flex;gap:8px;margin-top:12px}
        .cta-btn{background:var(--main);color:white;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
        .small-cta{background:white;border:1px solid var(--main);color:var(--main);padding:8px 12px;border-radius:10px;cursor:pointer}

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);margin-top:18px}
        h2{color:var(--main);margin:0 0 8px 0}
        p{margin:0;color:#333}

        /* ì°¸ì—¬ ìœ„ì ¯ */
        .participation{display:flex;gap:12px;align-items:center}
        .counter{font-size:28px;font-weight:800;color:var(--main)}
        .progress{height:12px;background:#eee;border-radius:12px;overflow:hidden;width:220px}
        .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--main),var(--accent));width:0%}

        /* ì§€ë„/ë¦¬ìŠ¤íŠ¸ ë ˆì´ì•„ì›ƒ */
        .split{display:grid;grid-template-columns:1fr 420px;gap:18px;margin-top:16px}
        .map{height:480px;border-radius:10px;border:2px solid var(--main);overflow:hidden;background:#fafafa;display:flex;align-items:center;justify-content:center}
        .map img{max-width:100%;height:auto}
        .filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
        .chip{padding:8px 10px;border-radius:999px;border:1px solid #e6e6e6;background:white;cursor:pointer}
        .chip.active{background:var(--main);color:white;border-color:var(--main)}

        .list{max-height:480px;overflow:auto;padding-right:8px}
        .shop{display:flex;gap:12px;align-items:flex-start;padding:12px;border-radius:10px;border:1px solid #f0f0f0;margin-bottom:10px}
        .badge{width:14px;height:14px;border-radius:50%;flex-shrink:0;margin-top:6px}
        .badge.good{background:#34c38f}
        .badge.missing{background:#ff6b6b}
        .shop-info{flex:1}
        .shop-info h3{margin:0;font-size:16px}
        .shop-info p{margin:6px 0 0 0;color:var(--muted);font-size:14px}
        .shop-actions{display:flex;flex-direction:column;gap:6px}
        .action-btn{padding:8px 10px;border-radius:8px;border:none;background:var(--main);color:white;cursor:pointer;font-size:13px}
        .ghost{background:white;color:var(--main);border:1px solid var(--main)}

        /* ê²€ìƒ‰ ë°•ìŠ¤ */
        .search-row{display:flex;gap:8px;align-items:center}
        .search-row input{flex:1;padding:10px;border-radius:10px;border:1px solid #ddd}

        /* ì²´í¬ë¦¬ìŠ¤íŠ¸ */
        .checklist{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
        .check{background:#fff;padding:10px 12px;border-radius:10px;border:1px solid #eee}

        /* í›„ê¸° ì„¹ì…˜ */
        .feedback{display:flex;gap:8px;align-items:center}
        .small{font-size:13px;color:var(--muted)}

        footer{margin:28px 0 80px 0;text-align:center;color:var(--muted);font-size:13px}

        /* ë°˜ì‘í˜• */
        @media(max-width:980px){
            .split{grid-template-columns:1fr}
            .map{height:320px}
            .list{max-height:320px}
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="brand">ê³µì • ì†Œë¹„ ì§€ë„</div>
        <button class="nav-btn" onclick="scrollToSection('home')">í™ˆ</button>
        <button class="nav-btn" onclick="scrollToSection('map')">ì§€ë„</button>
        <button class="nav-btn" onclick="scrollToSection('participate')">ë™ì°¸</button>
        <div style="flex:1"></div>
        <button class="nav-btn" onclick="shareSite()">ê³µìœ </button>
    </div>

    <div class="container">
        <!-- HERO -->
        <section id="home" class="card hero">
            <div class="hero-left">
                <h1>ì¶©ë‚¨ëŒ€ ì£¼ë³€ ìƒê¶Œ, <strong>íˆ¬ëª…í•œ ì„ íƒ</strong>ìœ¼ë¡œ ë°”ê¿”ë´…ì‹œë‹¤</h1>
                <p>ê°€ê²©ì„ ë¯¸ë¦¬ ì•Œ ìˆ˜ ì—†ì–´ì„œ ë¶ˆì´ìµì„ ë‹¹í•œ ê²½í—˜, í•œ ë²ˆì¯¤ ìˆìœ¼ì‹œì£ ? ìš°ë¦¬ í”„ë¡œì íŠ¸ëŠ” <strong>ëˆ„êµ¬ë‚˜</strong> ê°€ê²©ì„ ì•Œê³  ë¹„êµí•  ìˆ˜ ìˆëŠ” ìƒê¶Œì„ ë§Œë“œëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.</p>

                <div class="hero-cta">
                    <button class="cta-btn" onclick="scrollToSection('map')">ê³µì •ê°€ê²© ì§€ë„ ë³´ê¸°</button>
                    <button class="small-cta" onclick="scrollToSection('participate')">ë™ì°¸í•˜ê¸° â€¢ ì§€ê¸ˆ 0.5ì´ˆ íˆ¬ì</button>
                </div>

                <div style="margin-top:12px">
                    <div class="checklist">
                        <div class="check">âœ” ê°€ê²© ê³µê°œ ì—¬ë¶€ í•œëˆˆì—</div>
                        <div class="check">âœ” ì‹ ë¢° ê°€ê²Œ í‘œì‹œ</div>
                        <div class="check">âœ” í•™ìƒ ì°¸ì—¬í˜• í™•ì‚°</div>
                    </div>
                </div>
            </div>

            <div style="width:240px;text-align:center">
                <img src="illustration.png" alt="illustration" style="max-width:100%">
                <div style="font-size:12px;color:var(--muted);margin-top:8px">í•œ ë²ˆì˜ í´ë¦­ì´ ìƒê¶Œì„ ë°”ê¿‰ë‹ˆë‹¤</div>
            </div>
        </section>

        <!-- MAP & LIST -->
        <section id="map" class="card">
            <h2>ê³µì •ê°€ê²© ì§€ë„</h2>
            <p class="small">ì—…ì¢… í•„í„°, ì§€ì—­ í•„í„°ë¥¼ í†µí•´ ì›í•˜ëŠ” ê°€ê²Œë¥¼ ë¹ ë¥´ê²Œ ì°¾ì•„ë³´ì„¸ìš”.</p>

            <div style="margin-top:12px">
                <div class="search-row">
                    <input type="text" id="search" placeholder="ê°€ê²Œ ì´ë¦„ ë˜ëŠ” ì—…ì¢…ì„ ê²€ìƒ‰í•˜ì„¸ìš” (ì˜ˆ: í—¬ìŠ¤ì¥, ë¯¸ìš©ì‹¤)" oninput="renderList()">
                    <button class="chip" onclick="resetFilters()">ì´ˆê¸°í™”</button>
                </div>

                <div class="filters" style="margin-top:10px">
                    <div class="chip active" data-type="all" onclick="toggleChip(this)">ì „ì²´</div>
                    <div class="chip" data-type="í—¬ìŠ¤ì¥" onclick="toggleChip(this)">í—¬ìŠ¤ì¥</div>
                    <div class="chip" data-type="ë¯¸ìš©ì‹¤" onclick="toggleChip(this)">ë¯¸ìš©ì‹¤</div>
                    <div class="chip" data-type="ìŠ¤í„°ë””ì¹´í˜" onclick="toggleChip(this)">ìŠ¤í„°ë””ì¹´í˜</div>
                    <div class="chip" data-type="ì •ë¬¸" onclick="toggleChip(this)">ì •ë¬¸ê¶Œ</div>
                    <div class="chip" data-type="ì„œë¬¸" onclick="toggleChip(this)">ì„œë¬¸ê¶Œ</div>
                    <div class="chip" data-type="ìª½ë¬¸" onclick="toggleChip(this)">ìª½ë¬¸ê¶Œ</div>
                </div>

                <div class="split">
                    <div>
                        <div class="map" id="mapBox">
                            <!-- ì‹¤ì œ ì§€ë„ ëŒ€ì‹  ì˜ˆì‹œ ì´ë¯¸ì§€ ë˜ëŠ” í–¥í›„ ì§€ë„ ì„œë¹„ìŠ¤ ì—°ë™ -->
                            <img src="map_total.png" alt="ì „ì²´ ì§€ë„" id="mapImage">
                        </div>

                        <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
                            <button class="chip" onclick="zoomRegion('ì •ë¬¸')">ì •ë¬¸ê¶Œ ë³´ê¸°</button>
                            <button class="chip" onclick="zoomRegion('ì„œë¬¸')">ì„œë¬¸ê¶Œ ë³´ê¸°</button>
                            <button class="chip" onclick="zoomRegion('ìª½ë¬¸')">ìª½ë¬¸ê¶Œ ë³´ê¸°</button>
                            <button class="chip" onclick="showGoodShops()">ê°€ê²© ê³µê°œ ì˜ í•˜ëŠ” ê°€ê²Œ ë³´ê¸°</button>
                        </div>
                    </div>

                    <aside>
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                            <div style="font-weight:700">ê°€ê²Œ ëª©ë¡</div>
                            <div class="small">ì´ <span id="totalShops">0</span>ê°œ</div>
                        </div>

                        <div class="list" id="shopList"></div>
                    </aside>
                </div>
            </div>
        </section>

        <!-- ì°¸ì—¬ ì„¹ì…˜ -->
        <section id="participate" class="card">
            <h2>ë™ì°¸í•˜ê¸°</h2>
            <p class="small">ë³µì¡í•œ ì„œëª… ëŒ€ì‹ , í´ë¦­ ëª‡ ë²ˆìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”. ì‘ì€ ì°¸ì—¬ê°€ í° ë³€í™”ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

            <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-top:12px;flex-wrap:wrap">
                <div class="participation">
                    <div>
                        <div class="small">í˜„ì¬ ë™ì°¸ì</div>
                        <div class="counter" id="globalCount">0</div>
                        <div style="font-size:13px;color:var(--muted)">ëª©í‘œ: <strong id="goal">150</strong>ëª…</div>
                    </div>

                    <div style="margin-left:12px">
                        <div class="progress" aria-hidden><i id="progBar"></i></div>
                    </div>
                </div>

                <div style="display:flex;gap:8px">
                    <button class="cta-btn" onclick="participate()">ë™ì°¸í•˜ê¸°</button>
                    <button class="nav-btn ghost" onclick="openSurvey()">ë” ì˜ê²¬ ë‚¨ê¸°ê¸°</button>
                </div>
            </div>

            <div style="margin-top:18px" class="card">
                <h3 style="margin:0 0 8px 0">ì´ í˜ì´ì§€ê°€ ìœ ìš©í–ˆë‚˜ìš”?</h3>
                <div class="feedback">
                    <button class="chip" onclick="voteHelpful(true)">ğŸ‘ ìœ ìš©í•´ìš”</button>
                    <button class="chip" onclick="voteHelpful(false)">ğŸ‘ ë³„ë¡œì˜ˆìš”</button>
                    <div class="small" style="margin-left:8px">(í†µê³„ëŠ” ìµëª…ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤)</div>
                </div>
                <div style="margin-top:10px;color:var(--muted);font-size:13px">ì´ í”¼ë“œë°±ì€ ë””ìì¸ ë° ì½˜í…ì¸  ê°œì„ ì— í™œìš©ë©ë‹ˆë‹¤.</div>
            </div>

            <div style="margin-top:12px" class="card">
                <h3 style="margin:0 0 8px 0">ê³µì • ì†Œë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
                <div class="checklist">
                    <div class="check">ê°€ê²©í‘œê°€ ëª…í™•í•˜ê²Œ ê²Œì‹œë˜ì–´ ìˆë‹¤</div>
                    <div class="check">í™˜ë¶ˆ/ì·¨ì†Œ ê·œì •ì´ í‘œê¸°ë˜ì–´ ìˆë‹¤</div>
                    <div class="check">ì—…ì¢…ë³„ í‘œì¤€ ìš”ê¸ˆ ì˜ˆì‹œê°€ ì œì‹œë˜ì–´ ìˆë‹¤</div>
                </div>
                <p class="small" style="margin-top:8px">í•™ìƒë“¤ì´ ë§¤ì¥ì„ ë¹„êµí•  ë•Œ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.</p>
            </div>
        </section>

        <footer>
            ì¶©ë‚¨ëŒ€í•™êµ ê³µì • ì†Œë¹„ í”„ë¡œì íŠ¸ â€” í•™ìƒ ê¸°íšíŒ€
        </footer>
    </div>

<script>
    /* --- ë°ì´í„° ëª¨ì˜ --- */
    const shops = [
        {id:1,name:'Aí—¬ìŠ¤í´ëŸ½',type:'í—¬ìŠ¤ì¥',region:'ì •ë¬¸',price:'1ê°œì›” 25,000ì›',pricePublic:true},
        {id:2,name:'Bí”¼íŠ¸ë‹ˆìŠ¤',type:'í—¬ìŠ¤ì¥',region:'ì£½ë™',price:null,pricePublic:false},
        {id:3,name:'Cë¯¸ìš©ì‹¤',type:'ë¯¸ìš©ì‹¤',region:'ì •ë¬¸',price:'ì»· 18,000ì›',pricePublic:true},
        {id:4,name:'DìŠ¤í„°ë””ì¹´í˜',type:'ìŠ¤í„°ë””ì¹´í˜',region:'ì„œë¬¸',price:'ì‹œê°„ë‹¹ 2,000ì›',pricePublic:true},
        {id:5,name:'Eí—¤ì–´',type:'ë¯¸ìš©ì‹¤',region:'ìª½ë¬¸',price:null,pricePublic:false},
        {id:6,name:'Fí—¬ìŠ¤',type:'í—¬ìŠ¤ì¥',region:'ì„œë¬¸',price:'1ê°œì›” 30,000ì›',pricePublic:true}
    ];

    const GOAL = 150;

    /* --- ì´ˆê¸°í™” --- */
    document.addEventListener('DOMContentLoaded', ()=>{
        // ì°¸ì—¬ ì¹´ìš´íŠ¸ ì´ˆê¸°í™”
        const count = Number(localStorage.getItem('global-participation-count') || 0);
        updateGlobalCount(count);
        renderList();
        document.getElementById('goal').textContent = GOAL;
    });

    /* --- ìœ í‹¸ë¦¬í‹° --- */
    function scrollToSection(id){
        document.getElementById(id).scrollIntoView({behavior:'smooth'});
    }

    function shareSite(){
        const url = location.href;
        if(navigator.share){
            navigator.share({title:'ê³µì • ì†Œë¹„ ì§€ë„', text:'ì¶©ë‚¨ëŒ€ ì£¼ë³€ ê³µì • ì†Œë¹„ ì§€ë„ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”', url});
        } else {
            copyToClipboard(url);
            alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. í•™êµ ì»¤ë®¤ë‹ˆí‹°ì— ë¶™ì—¬ë„£ì–´ ê³µìœ í•˜ì„¸ìš”.');
        }
    }

    function copyToClipboard(text){
        const ta = document.createElement('textarea');
        ta.value = text;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);
    }

    /* --- ì§€ë„ ê´€ë ¨ (ê°„ë‹¨í•œ ë¡œì»¬ ì‹œë®¬ë ˆì´ì…˜) --- */
    let activeFilters = {types: new Set(['all'])};

    function toggleChip(el){
        const type = el.dataset.type;
        // single-select for region vs multi-select for type; simple rules: 'all' resets
        if(type === 'all'){
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            activeFilters.types = new Set(['all']);
        } else {
            document.querySelector('.chip[data-type="all"]').classList.remove('active');
            el.classList.toggle('active');
            // build types set
            const active = Array.from(document.querySelectorAll('.chip.active')).map(c => c.dataset.type).filter(Boolean);
            if(active.length===0){document.querySelector('.chip[data-type="all"]').classList.add('active'); activeFilters.types = new Set(['all']);}
            else activeFilters.types = new Set(active);
        }
        renderList();
    }

    function resetFilters(){
        document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
        document.querySelector('.chip[data-type="all"]').classList.add('active');
        activeFilters.types = new Set(['all']);
        document.getElementById('search').value='';
        renderList();
    }

    function zoomRegion(region){
        // placeholder: change map image if region-specific images exist
        alert(region + ' ì¤‘ì‹¬ìœ¼ë¡œ í™•ëŒ€(ì˜ˆì‹œ ê¸°ëŠ¥)');
    }

    function showGoodShops(){
        alert('ê°€ê²©ì„ ê³µê°œí•œ ê°€ê²Œë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.');
        // set chips to show only pricePublic true
        // For simplicity, mark only 'good' shops in list
        renderList(true);
    }

    /* --- ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ --- */
    function renderList(onlyGood=false){
        const q = document.getElementById('search').value.trim();
        const listEl = document.getElementById('shopList');
        listEl.innerHTML = '';
        let filtered = shops.slice();

        // text search
        if(q){
            filtered = filtered.filter(s => (s.name+" "+s.type+" "+(s.region||"")).toLowerCase().includes(q.toLowerCase()));
        }

        // filters
        const types = activeFilters.types;
        if(!types.has('all')){
            filtered = filtered.filter(s => types.has(s.type) || types.has(s.region));
        }

        if(onlyGood) filtered = filtered.filter(s => s.pricePublic);

        document.getElementById('totalShops').textContent = filtered.length;

        filtered.forEach(s => {
            const el = document.createElement('div'); el.className='shop';
            const badge = document.createElement('div'); badge.className='badge '+(s.pricePublic? 'good':'missing');
            el.appendChild(badge);

            const info = document.createElement('div'); info.className='shop-info';
            const h3 = document.createElement('h3'); h3.textContent = s.name + ' Â· ' + s.type;
            const p = document.createElement('p');
            if(s.pricePublic) p.innerHTML = (s.price? '<strong>'+s.price+'</strong> â€¢ '+s.region : 'ê°€ê²© ì •ë³´ ê³µê°œë¨ â€¢ '+s.region);
            else p.innerHTML = '<em>ê°€ê²© ë¯¸í‘œì‹œ â€¢ '+s.region+'</em>';
            info.appendChild(h3); info.appendChild(p);
            el.appendChild(info);

            const actions = document.createElement('div'); actions.className='shop-actions';
            const likeBtn = document.createElement('button'); likeBtn.className='action-btn ghost'; likeBtn.textContent='ì¢‹ì•„ìš”';
            likeBtn.onclick = ()=>{toast('ì¢‹ì•„ìš” ê°ì‚¬í•©ë‹ˆë‹¤!');};
            const detailBtn = document.createElement('button'); detailBtn.className='action-btn'; detailBtn.textContent='ìƒì„¸ë³´ê¸°';
            detailBtn.onclick = ()=>{openShopModal(s)};
            actions.appendChild(likeBtn); actions.appendChild(detailBtn);
            el.appendChild(actions);

            listEl.appendChild(el);
        });
    }

    function openShopModal(shop){
        const msg = shop.name + '\n\nì—…ì¢…: ' + shop.type + '\nì§€ì—­: ' + shop.region + '\n' + (shop.pricePublic? ('ê°€ê²©: '+shop.price) : 'ê°€ê²© ì •ë³´ ë¯¸í‘œì‹œ');
        const action = shop.pricePublic ? 'ì´ ê°€ê²ŒëŠ” ê°€ê²©ì„ ê³µê°œí•˜ê³  ìˆì–´ìš”. ë°©ë¬¸ ì „ì— ë¹„êµí•˜ì„¸ìš”.' : 'ê°€ê²© ë¯¸í‘œì‹œ ê°€ê²Œì…ë‹ˆë‹¤. ê°œì„  ìš”ì²­ì„ ìœ„í•´ ë™ì°¸í•´ì£¼ì„¸ìš”.';
        if(confirm(msg + '\n\n' + action + '\n\nê³µìœ í•˜ì‹œê² ì–´ìš”?')){
            copyToClipboard(location.href + '#shop-' + shop.id);
            alert('ê°€ê²Œ ë§í¬(í˜ì´ì§€ ë§í¬)ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì»¤ë®¤ë‹ˆí‹°ì— ë¶™ì—¬ë„£ì–´ ê³µìœ í•˜ì„¸ìš”.');
        }
    }

    function toast(msg){
        const t = document.createElement('div');
        t.textContent = msg; t.style.position='fixed'; t.style.right='20px'; t.style.bottom='20px'; t.style.background='rgba(0,0,0,0.8)'; t.style.color='white'; t.style.padding='10px 14px'; t.style.borderRadius='8px'; t.style.zIndex=9999;
        document.body.appendChild(t); setTimeout(()=>t.remove(),1800);
    }

    /* --- ì°¸ì—¬ ê¸°ëŠ¥ --- */
    function updateGlobalCount(n){
        document.getElementById('globalCount').textContent = n;
        const pct = Math.min(100, Math.round((n/GOAL)*100));
        document.getElementById('progBar').style.width = pct + '%';
    }

    function participate(){
        const key = 'global-participation-count';
        let count = Number(localStorage.getItem(key) || 0);
        // prevent multiple increments per user session: use flag
        if(localStorage.getItem('joined-'+location.pathname)){
            alert('ì´ë¯¸ ë™ì°¸í•˜ì…¨ìŠµë‹ˆë‹¤. ê³µìœ ë¡œ ë” ë§ì€ ì‚¬ëŒì„ ì´ˆëŒ€í•´ì£¼ì„¸ìš”!'); return;
        }
        count += 1; localStorage.setItem(key, count); localStorage.setItem('joined-'+location.pathname, '1');
        updateGlobalCount(count);
        toast('ë™ì°¸ ê°ì‚¬í•©ë‹ˆë‹¤!');
    }

    /* --- ì„¤ë¬¸/ì„œëª… ë§í¬ --- */
    function openSurvey(){
        window.open('https://forms.gle/XXXXXXX','_blank');
    }

    /* --- í˜ì´ì§€ ìœ ìš©ì„± íˆ¬í‘œ --- */
    function voteHelpful(isGood){
        const key = 'page-helpful-stats';
        const stats = JSON.parse(localStorage.getItem(key) || JSON.stringify({good:0,bad:0}));
        if(localStorage.getItem('voted-helpful')){alert('ì´ë¯¸ íˆ¬í‘œí•˜ì…¨ìŠµë‹ˆë‹¤. ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤.'); return;}
        if(isGood) stats.good++; else stats.bad++;
        localStorage.setItem(key, JSON.stringify(stats)); localStorage.setItem('voted-helpful','1');
        alert('í”¼ë“œë°±ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!');
    }

    // ì´ˆê¹ƒê°’ ë¡œë“œ
    function init(){
        const c = Number(localStorage.getItem('global-participation-count') || 0);
        updateGlobalCount(c);
        // render list initially
        renderList();
    }

    init();
</script>
</body>
</html>